!function(e){var n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)r.d(t,i,function(n){return e[n]}.bind(null,i));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=0)}([function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const t=r(1);r(4),console.log("Starting game logic...");var i=document.querySelector("canvas"),o=i.getContext("2d");i.width=700,i.height=700;console.log("Initializing SpriteOperations..."),t.Initialize()?(console.log("Sprites initialized! Starting game loop..."),function e(n){t.DrawGameBoard(o),requestAnimationFrame(e)}()):console.log("Sprites failed to load!")},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const t=r(2),i=r(3);class o{constructor(e,n,r,t){this.srcTileX=e,this.srcTileY=n,this.drawTileX=r,this.drawTileY=t}}var a=null,s=-1,c=-1;console.log("Creating SpriteMap");var l=new class{constructor(){this.image=new Image,this.image.src=i,this.tilePxSize=12}drawGameTile(e,n,r,t,i){var o=this.tilePxSize,a=this.tilePxSize;e.drawImage(this.image,t*this.tilePxSize,i*this.tilePxSize,o,a,n,r,o,a)}};n.DrawGameBoard=function(e){for(var n,r,t=0;t<a.length;t++)n=a[t].srcTileX*l.tilePxSize,r=a[t].srcTileY*l.tilePxSize,l.drawGameTile(e,n,r,a[t].drawTileX,a[t].drawTileY)},n.Initialize=function(){return!!function(e){console.log("Printing gameboard text..."),console.log(e);var n=e.split("\n");s=n[0].length,c=n.length;for(var r=0;r<n.length;r++)n[r].length!==s&&console.log("WARNING: Line "+r+" ("+n[r].length+") does not have the correct number of tiles!"+s+" Map is malformed!");for(a=new Array,r=0;r<n.length;r++)for(var t=n[r],i=0;i<t.length;i++)if(0!=Number(t[i]))switch(t[i]){case"┏":a.push(new o(i,r,19,3));break;case"━":a.push(new o(i,r,20,3));break;case"┓":a.push(new o(i,r,18,3));break;case"┃":a.push(new o(i,r,24,3));break;case"┗":a.push(new o(i,r,17,3));break;case"┛":a.push(new o(i,r,16,3));break;case".":case"O":case" ":case"":break;default:return console.log("ERROR: Unhandle char: '"+t[i]+"' ascii "+Number(t[i])+" at i,j="+r+","+i),!1}return console.log("Processed Gameboard. Width="+s+", Height="+c+", TileCount="+a.length),!0}(t.default)}},function(e,n,r){"use strict";r.r(n),n.default="┏━━━━━━━━━━━━┓┏━━━━━━━━━━━━┓\r\n┃............┃┃............┃\r\n┃.┏━━┓.┏━━━┓.┃┃.┏━━━┓.┏━━┓.┃\r\n┃O┃  ┃.┃   ┃.┃┃.┃   ┃.┃  ┃O┃\r\n┃.┗━━┛.┗━━━┛.┗┛.┗━━━┛.┗━━┛.┃\r\n┃..........................┃\r\n┃.┏━━┓.┏┓.┏━━━━━━┓.┏┓.┏━━┓.┃\r\n┃.┗━━┛.┃┃.┗━━┓┏━━┛.┃┃.┗━━┛.┃\r\n┃......┃┃....┃┃....┃┃......┃\r\n┗━━━━┓.┃┗━━┓ ┃┃ ┏━━┛┃.┏━━━━┛\r\n     ┃.┃┏━━┛ ┗┛ ┗━━┓┃.┃     \r\n     ┃.┃┃          ┃┃.┃     \r\n     ┃.┃┃ ┏━━━━━━┓ ┃┃.┃     \r\n━━━━━┛.┗┛ ┃      ┃ ┗┛.┗━━━━━\r\n      .   ┃      ┃   .      \r\n━━━━━┓.┏┓ ┃      ┃ ┏┓.┏━━━━━\r\n     ┃.┃┃ ┗━━━━━━┛ ┃┃.┃     \r\n     ┃.┃┃          ┃┃.┃     \r\n     ┃.┃┃ ┏━━━━━━┓ ┃┃.┃     \r\n┏━━━━┛.┗┛ ┗━━┓┏━━┛ ┗┛.┗━━━━┓\r\n┃............┃┃............┃\r\n┃.┏━━┓.┏━━━┓.┃┃.┏━━━┓.┏━━┓.┃\r\n┃.┗━┓┃.┗━━━┛.┗┛.┗━━━┛.┃┏━┛.┃\r\n┃O..┃┃.......  .......┃┃..O┃\r\n┗━┓.┃┃.┏┓.┏━━━━━━┓.┏┓.┃┃.┏━┛\r\n┏━┛.┗┛.┃┃.┗━━┓┏━━┛.┃┃.┗┛.┗━┓\r\n┃......┃┃....┃┃....┃┃......┃\r\n┃.┏━━━━┛┗━━┓.┃┃.┏━━┛┗━━━━┓.┃\r\n┃.┗━━━━━━━━┛.┗┛.┗━━━━━━━━┛.┃\r\n┃..........................┃\r\n┗━━━━━━━━━━━━━━━━━━━━━━━━━━┛"},function(e,n,r){e.exports=r.p+"fb0f3cd40f1cabfd136204fb9835cf42.png"},function(e,n,r){var t=r(5);"string"==typeof t&&(t=[[e.i,t,""]]);var i={insert:"head",singleton:!1};r(7)(t,i);t.locals&&(e.exports=t.locals)},function(e,n,r){(e.exports=r(6)(!1)).push([e.i,"html, body {\r\n  margin: 0;\r\n}\r\n\r\nhtml {\r\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\r\n  height: 100%;\r\n}\r\n\r\nbody {\r\n  background: #84AAB2;\r\n}\r\n\r\n\r\n\r\na:link {\r\n\r\n  text-decoration: none;\r\n  color: white;\r\n}\r\n\r\n.divheaderbar {\r\n  display: grid;\r\n  background: #364B4C;\r\n  width: 100%;\r\n  padding: 20px 40px;\r\n}\r\n\r\n.divgamecontainer {\r\n  height:inherit;\r\n  display: flex;\r\n  width: 768px;\r\n  /* Orders items top-bottom */\r\n  flex-direction: column;\r\n  background: #678787;\r\n\r\n  /* Allows the div to size itself according to the children and center itself. */\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\n.title {\r\n  /* Forces title card to center itself */\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-top: 40px;\r\n  height: 40px;\r\n}\r\n\r\ncanvas {\r\n  /* Canvas width/height set in code */\r\n  margin-top: 30px;\r\n  margin-left: 20px;\r\n  margin-right: 20px;\r\n}",""])},function(e,n,r){"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var r=function(e,n){var r=e[1]||"",t=e[3];if(!t)return r;if(n&&"function"==typeof btoa){var i=(a=t,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=t.sources.map((function(e){return"/*# sourceURL=".concat(t.sourceRoot).concat(e," */")}));return[r].concat(o).concat([i]).join("\n")}var a,s,c;return[r].join("\n")}(n,e);return n[2]?"@media ".concat(n[2],"{").concat(r,"}"):r})).join("")},n.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var t={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(t[o]=!0)}for(var a=0;a<e.length;a++){var s=e[a];null!=s[0]&&t[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="(".concat(s[2],") and (").concat(r,")")),n.push(s))}},n}},function(e,n,r){"use strict";var t,i={},o=function(){return void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t},a=function(){var e={};return function(n){if(void 0===e[n]){var r=document.querySelector(n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[n]=r}return e[n]}}();function s(e,n){for(var r=[],t={},i=0;i<e.length;i++){var o=e[i],a=n.base?o[0]+n.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};t[a]?t[a].parts.push(s):r.push(t[a]={id:a,parts:[s]})}return r}function c(e,n){for(var r=0;r<e.length;r++){var t=e[r],o=i[t.id],a=0;if(o){for(o.refs++;a<o.parts.length;a++)o.parts[a](t.parts[a]);for(;a<t.parts.length;a++)o.parts.push(m(t.parts[a],n))}else{for(var s=[];a<t.parts.length;a++)s.push(m(t.parts[a],n));i[t.id]={id:t.id,refs:1,parts:s}}}}function l(e){var n=document.createElement("style");if(void 0===e.attributes.nonce){var t=r.nc;t&&(e.attributes.nonce=t)}if(Object.keys(e.attributes).forEach((function(r){n.setAttribute(r,e.attributes[r])})),"function"==typeof e.insert)e.insert(n);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}return n}var u,f=(u=[],function(e,n){return u[e]=n,u.filter(Boolean).join("\n")});function d(e,n,r,t){var i=r?"":t.css;if(e.styleSheet)e.styleSheet.cssText=f(n,i);else{var o=document.createTextNode(i),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(o,a[n]):e.appendChild(o)}}function p(e,n,r){var t=r.css,i=r.media,o=r.sourceMap;if(i&&e.setAttribute("media",i),o&&btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}var h=null,g=0;function m(e,n){var r,t,i;if(n.singleton){var o=g++;r=h||(h=l(n)),t=d.bind(null,r,o,!1),i=d.bind(null,r,o,!0)}else r=l(n),t=p.bind(null,r,n),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else i()}}e.exports=function(e,n){(n=n||{}).attributes="object"==typeof n.attributes?n.attributes:{},n.singleton||"boolean"==typeof n.singleton||(n.singleton=o());var r=s(e,n);return c(r,n),function(e){for(var t=[],o=0;o<r.length;o++){var a=r[o],l=i[a.id];l&&(l.refs--,t.push(l))}e&&c(s(e,n),n);for(var u=0;u<t.length;u++){var f=t[u];if(0===f.refs){for(var d=0;d<f.parts.length;d++)f.parts[d]();delete i[f.id]}}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcGFjbWFuL3NyYy9QYWNtYW5NYWluLnRzIiwid2VicGFjazovLy8uL3BhY21hbi9zcmMvU3ByaXRlT3BlcmF0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9wYWNtYW4vc3JjL0dhbWVCb2FyZDEudHh0Iiwid2VicGFjazovLy8uL3BhY21hbi9zcmMvc3ByaXRlbWFwLTM4NC5wbmciLCJ3ZWJwYWNrOi8vLy4vcGFjbWFuL3NyYy9wYWNtYW5fc3R5bGUuY3NzP2U0YmMiLCJ3ZWJwYWNrOi8vLy4vcGFjbWFuL3NyYy9wYWNtYW5fc3R5bGUuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY29uc29sZSIsImxvZyIsImNhbnZhcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImN0eCIsImdldENvbnRleHQiLCJ3aWR0aCIsImhlaWdodCIsIlNwcml0ZU9wZXJhdGlvbnMiLCJJbml0aWFsaXplIiwibG9vcCIsInRpbWVzdGFtcCIsIkRyYXdHYW1lQm9hcmQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJNYXplUGFydHMiLCJUaWxlIiwic3JjWCIsInNyY1kiLCJkcmF3WCIsImRyYXdZIiwidGhpcyIsInNyY1RpbGVYIiwic3JjVGlsZVkiLCJkcmF3VGlsZVgiLCJkcmF3VGlsZVkiLCJtX2dhbWVCb2FyZFRpbGVzIiwibV9nYW1lQm9hcmRXaWR0aCIsIm1fZ2FtZUJvYXJkSGVpZ2h0IiwibV9zcHJpdGVNYXAiLCJpbWFnZSIsIkltYWdlIiwic3JjIiwidGlsZVB4U2l6ZSIsImNvbnRleHQiLCJkcmF3VG9YIiwiZHJhd1RvWSIsInRpbGVYIiwidGlsZVkiLCJ0aWxlVyIsInRpbGVIIiwiZHJhd0ltYWdlIiwiYm9hcmRYIiwiYm9hcmRZIiwibGVuZ3RoIiwiZHJhd0dhbWVUaWxlIiwiZ2FtZUJvYXJkU3RyIiwiZ2FtZUJvYXJkUm93cyIsInNwbGl0IiwiQXJyYXkiLCJyb3ciLCJqIiwiTnVtYmVyIiwicHVzaCIsIlByb2Nlc3NHYW1lYm9hcmRUZXh0IiwiY29udGVudCIsIm9wdGlvbnMiLCJsb2NhbHMiLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJtYXAiLCJpdGVtIiwiY3NzTWFwcGluZyIsImJ0b2EiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlTWFwIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImNvbmNhdCIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlIiwic291cmNlUm9vdCIsImpvaW4iLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJpZCIsIl9pIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIkJvb2xlYW4iLCJ3aW5kb3ciLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJlIiwibGlzdFRvU3R5bGVzIiwic3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsInBhcnRzIiwiYWRkU3R5bGVzVG9Eb20iLCJkb21TdHlsZSIsInJlZnMiLCJhZGRTdHlsZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJub25jZSIsImtleXMiLCJmb3JFYWNoIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwiaW5kZXgiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJvYmoiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsIl9kb21TdHlsZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZG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LCJmaWxlIjoibWFpbi5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJcclxuaW1wb3J0ICogYXMgU3ByaXRlT3BlcmF0aW9ucyBmcm9tICcuL1Nwcml0ZU9wZXJhdGlvbnMnO1xyXG5cclxuLy8gSW1wb3J0IGFueSBhc3NldHMgdGhhdCBuZWVkIHRvIGJlIHBhY2thZ2VkIHVwIHVzaW5nIFdlYlBhY2tcclxuaW1wb3J0ICcuL3BhY21hbl9zdHlsZS5jc3MnO1xyXG5cclxuXHJcbmNvbnNvbGUubG9nKFwiU3RhcnRpbmcgZ2FtZSBsb2dpYy4uLlwiKTtcclxuXHJcbnZhciBjYW52YXM6SFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxudmFyIGN0eDpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbnZhciB3aWR0aDpudW1iZXIgPSBjYW52YXMud2lkdGggPSA3MDA7XHJcbnZhciBoZWlnaHQ6bnVtYmVyID0gY2FudmFzLmhlaWdodCA9IDcwMDtcclxuXHJcblxyXG5cclxuLy8gZGVmaW5lIGxvb3AgdGhhdCBrZWVwcyBkcmF3aW5nIHRoZSBzY2VuZSBjb25zdGFudGx5XHJcbmZ1bmN0aW9uIGxvb3AodGltZXN0YW1wOm51bWJlcik6dm9pZCBcclxue1xyXG5cclxuICAgIFNwcml0ZU9wZXJhdGlvbnMuRHJhd0dhbWVCb2FyZChjdHgpO1xyXG5cclxuXHQvLyBUaGlzIG1ldGhvZCB3aWxsIGFpbSBmb3IgNjAgZnBzIGRlcGVuZGluZyBvbiB5b3VyIG1vbml0b3IgcmVmcmVzaCByYXRlLFxyXG5cdC8vIGFuZCBpcyBhbHdheXMgY2FsbGVkIGJlZm9yZSB0aGUgbmV4dCBidWZmZXIgZHJhd24gaW4gdGhlIGJyb3dzZXIuXHJcblx0Ly8gVGhpcyBpcyBhIHNwZWNpYWwgbWV0aG9kIG9wdGltaXplZCBmb3IgYW5pbWF0aW9ucy5cclxuXHQvLyBUaGUgbWV0aG9kIHdpbGwgbm90IHJ1biBpZiB0aGUgY2FudmFzIGlzIG9mZnNjcmVlbiAoSSdsbCBuZWVkIHRvIHZlcmlmeSkuXHJcblx0Ly8gQ2FuIGJlIGNhbmNlbGxlZCB1c2luZyBjYW5jZWxBbmltYXRpb25GcmFtZSgpXHJcblx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG59XHJcblxyXG5cclxuXHJcbmNvbnNvbGUubG9nKFwiSW5pdGlhbGl6aW5nIFNwcml0ZU9wZXJhdGlvbnMuLi5cIik7XHJcblxyXG5pZiAoU3ByaXRlT3BlcmF0aW9ucy5Jbml0aWFsaXplKCkpXHJcbntcclxuXHRjb25zb2xlLmxvZyhcIlNwcml0ZXMgaW5pdGlhbGl6ZWQhIFN0YXJ0aW5nIGdhbWUgbG9vcC4uLlwiKTtcclxuXHJcblx0Ly8gU3ByaXRlcyBpbml0aWFsaXplZC4gU3RhcnQgZ2FtZSBsb29wLlxyXG5cdGxvb3AoMCk7XHJcbn1cclxuZWxzZVxyXG57XHJcblx0Y29uc29sZS5sb2coXCJTcHJpdGVzIGZhaWxlZCB0byBsb2FkIVwiKTtcclxuXHQvLyBTaG93IGVycm9yIGRpc3BsYXlcclxuXHJcbn1cclxuXHJcblxyXG4iLCIvL3ZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7IC8qIGNvbW1vbkpzIHN5bnRheCAqL1xyXG4vLyBpbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7IC8vIERvbid0IG5lZWQgZnMgcmlnaHQgbm93Li4uXHJcblxyXG4vLyBJbXBvcnQgYXNzZXRzIHRoYXQgbmVlZCB0byBiZSBwYWNrYWdlZCB1cCB1c2luZyBXZWJQYWNrXHJcbmltcG9ydCBHYW1lQm9hcmRUZXh0IGZyb20gJy4vR2FtZUJvYXJkMS50eHQnO1xyXG4vLyBJbXBvcnQgZG9lc24ndCBzZWVtIHRvIHdvcmsgaW4gdHlwZXNjcmlwdCBmb3IgV2ViUGFjayBwYWNrYWdpbmcuIE5vdCBzdXJlIHdoeS4uLi5cclxuY29uc3QgTWF6ZVBhcnRzID0gcmVxdWlyZSgnLi9zcHJpdGVtYXAtMzg0LnBuZycpO1xyXG5cclxuLyogR2FtZSBib2FyZCB3aWxsIHVzZSBhIDI4eDMxIHRpbGUgc2V0LCByZW5kZXJlZCBmcm9tIHRoZSBzcHJpdGUgbWFwIChzcHJpdGVtYXAtMzg0LnBuZykuIFxyXG5UaGUgY2FudmFzIHNpemUgd2lsbCBleGFjdGx5IG1hdGNoIHRoZSBzaXplIG9mIHRoZSBsYWlkIG91dCB0aWxlIHNldC4gXHJcbkVhY2ggdGlsZSB3aWxsIGJlIDI0eDI0IHBpeGVscy4gXHJcblRoaXMgbWVhbnMgdGhlIGdhbWUgYm9hcmTigJlzIHBpeGVsIGRpbWVuc2lvbnMgYXJlOiA2NzJ4NzQ0LiAqL1xyXG5cclxuLyogVGhpcyBkb2N1bWVudCB3aWxsIG1hcCBhIGNoYXJhY3RlciBmcm9tIHRoZSBzcHJpdGUgbWFwIHRvIGEgdGlsZSBpbmRleC4gKi9cclxuXHJcblxyXG4vLyBPbiBzdWNjZXNzLCByZXR1cm5zIHRoZSBmaWxlIGRhdGFcclxuLy8gT24gZmFpbHVyZSwgcmV0dXJucyB0aGUgRXJyb3JOb0V4Y2VwdGlvblxyXG4vLyBmdW5jdGlvbiBSZWFkRmlsZUFzeW5jKGZpbGVuYW1lOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgXHJcbi8vICAgICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSxyZWplY3QpID0+IHtcclxuLy8gICAgICAgICBmcy5yZWFkRmlsZShmaWxlbmFtZSwgKGVyciwgZGF0YTpCdWZmZXIpID0+IHtcclxuLy8gICAgICAgICAgICAgaWYgKGVycikgXHJcbi8vICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuLy8gICAgICAgICAgICAgZWxzZSBcclxuLy8gICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XHJcbi8vICAgICAgICAgfSk7XHJcbi8vICAgICB9KTtcclxuLy8gfVxyXG5cclxuXHJcblxyXG5jbGFzcyBUaWxlIHtcclxuXHJcbiAgICAvLyBUaGUgcG9zaXRpb24gaW4gdGhlIGdhbWVib2FyZFxyXG4gICAgc3JjVGlsZVg6bnVtYmVyO1xyXG4gICAgc3JjVGlsZVk6bnVtYmVyO1xyXG5cclxuICAgIC8vIFRoZSBwb3NpdGlvbiBpbiB0aGUgc3ByaXRlbWFwIGZvciB0aGlzIHRpbGUuXHJcbiAgICAvLyBEcmF3IHRpbGVzIGFyZSBiYXNlZCBvbiBzcHJpdGVtYXAtMzg0LnBuZ1xyXG4gICAgZHJhd1RpbGVYOm51bWJlcjtcclxuICAgIGRyYXdUaWxlWTpudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3JjWDpudW1iZXIsIHNyY1k6bnVtYmVyLCBkcmF3WDpudW1iZXIsIGRyYXdZOm51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc3JjVGlsZVggPSBzcmNYO1xyXG4gICAgICAgIHRoaXMuc3JjVGlsZVkgPSBzcmNZO1xyXG4gICAgICAgIHRoaXMuZHJhd1RpbGVYID0gZHJhd1g7XHJcbiAgICAgICAgdGhpcy5kcmF3VGlsZVkgPSBkcmF3WTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIG1fZ2FtZUJvYXJkVGlsZXM6VGlsZVtdID0gbnVsbDtcclxudmFyIG1fZ2FtZUJvYXJkV2lkdGg6bnVtYmVyID0gLTE7XHJcbnZhciBtX2dhbWVCb2FyZEhlaWdodDpudW1iZXIgPSAtMTtcclxuXHJcbmZ1bmN0aW9uIFByb2Nlc3NHYW1lYm9hcmRUZXh0KGdhbWVCb2FyZFN0cjpzdHJpbmcpIDogYm9vbGVhblxyXG57XHJcbiAgICB2YXIgY2hhckNvdW50Om51bWJlciA9IDA7XHJcbiBcclxuICAgIGNvbnNvbGUubG9nKFwiUHJpbnRpbmcgZ2FtZWJvYXJkIHRleHQuLi5cIik7XHJcbiAgICBjb25zb2xlLmxvZyhnYW1lQm9hcmRTdHIpO1xyXG5cclxuICAgIHZhciBnYW1lQm9hcmRSb3dzID0gZ2FtZUJvYXJkU3RyLnNwbGl0KCdcXG4nKTtcclxuICAgIFxyXG4gICAgLy8gVGhlIGZpcnN0IHJvdyB3aWxsIGRldGVybWluZSB0aGUgbWFwIHdpZHRoXHJcbiAgICBtX2dhbWVCb2FyZFdpZHRoID0gZ2FtZUJvYXJkUm93c1swXS5sZW5ndGg7XHJcbiAgICBtX2dhbWVCb2FyZEhlaWdodCA9IGdhbWVCb2FyZFJvd3MubGVuZ3RoO1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayB0byBtYWtlIHN1cmUgd2UgaGF2ZSB0aGUgY29ycmVjdCBudW1iZXIgb2YgbWFwIHRpbGVzXHJcbiAgICAvLyBNYWtlIHN1cmUgdGhlcmUgaXNuJ3QgYSBuZXdsaW5lIGFmdGVyIHRoZSBsYXN0IGxpbmUuIFRoYXQgd2lsbCB0cmlwIHRoaXMgZXJyb3IuXHJcbiAgICBmb3IodmFyIGk9MDtpPGdhbWVCb2FyZFJvd3MubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZiAoZ2FtZUJvYXJkUm93c1tpXS5sZW5ndGggIT09IG1fZ2FtZUJvYXJkV2lkdGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIldBUk5JTkc6IExpbmUgXCIgKyBpICsgXCIgKFwiICsgZ2FtZUJvYXJkUm93c1tpXS5sZW5ndGggKyBcIilcIiArIFwiIGRvZXMgbm90IGhhdmUgdGhlIGNvcnJlY3QgbnVtYmVyIG9mIHRpbGVzIVwiICsgbV9nYW1lQm9hcmRXaWR0aCArIFwiIE1hcCBpcyBtYWxmb3JtZWQhXCIpO1xyXG4gICAgICAgICAgICAvL3JldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgdGlsZXNcclxuICAgIG1fZ2FtZUJvYXJkVGlsZXMgPSBuZXcgQXJyYXk8VGlsZT4oKTtcclxuXHJcbiAgICBmb3IoaT0wO2k8Z2FtZUJvYXJkUm93cy5sZW5ndGg7aSsrKVxyXG4gICAge1xyXG4gICAgICAgIHZhciByb3c6c3RyaW5nID0gZ2FtZUJvYXJkUm93c1tpXTtcclxuXHJcbiAgICAgICAgZm9yKHZhciBqPTA7ajxyb3cubGVuZ3RoO2orKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChOdW1iZXIocm93W2pdKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2gocm93W2pdKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICfilI8nOntcclxuICAgICAgICAgICAgICAgICAgICBtX2dhbWVCb2FyZFRpbGVzLnB1c2gobmV3IFRpbGUoaixpLDE5LDMpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgJ+KUgSc6e1xyXG4gICAgICAgICAgICAgICAgICAgIG1fZ2FtZUJvYXJkVGlsZXMucHVzaChuZXcgVGlsZShqLGksMjAsMykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAn4pSTJzp7XHJcbiAgICAgICAgICAgICAgICAgICAgbV9nYW1lQm9hcmRUaWxlcy5wdXNoKG5ldyBUaWxlKGosaSwxOCwzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlICfilIMnOntcclxuICAgICAgICAgICAgICAgICAgICBtX2dhbWVCb2FyZFRpbGVzLnB1c2gobmV3IFRpbGUoaixpLDI0LDMpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgJ+KUlyc6e1xyXG4gICAgICAgICAgICAgICAgICAgIG1fZ2FtZUJvYXJkVGlsZXMucHVzaChuZXcgVGlsZShqLGksMTcsMykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAn4pSbJzp7XHJcbiAgICAgICAgICAgICAgICAgICAgbV9nYW1lQm9hcmRUaWxlcy5wdXNoKG5ldyBUaWxlKGosaSwxNiwzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlICcuJzp7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlICdPJzp7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlICcgJzp7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlICcnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhbiBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1I6IFVuaGFuZGxlIGNoYXI6ICdcIiArIHJvd1tqXSArIFwiJyBhc2NpaSBcIiArIE51bWJlcihyb3dbal0pICsgXCIgYXQgaSxqPVwiICsgaSArIFwiLFwiICsgaik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJQcm9jZXNzZWQgR2FtZWJvYXJkLiBXaWR0aD1cIiArIG1fZ2FtZUJvYXJkV2lkdGggKyBcIiwgSGVpZ2h0PVwiICsgbV9nYW1lQm9hcmRIZWlnaHQgKyBcIiwgVGlsZUNvdW50PVwiICsgbV9nYW1lQm9hcmRUaWxlcy5sZW5ndGgpO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vLyBFdmVudHVhbGx5LCB0aGlzIHdpbGwgcmV0dXJuIGEgcHJvbWlzZSBzbyB0aGF0IGFsbCBhc3NldHMgYXJlIGRvd25sb2FkZWQgYXN5bmNocm9ub3VzbHlcclxuLy8gZnVuY3Rpb24gRG93bmxvYWRBbGxBc3NldHMoKSA6IHZvaWQge1xyXG5cclxuLy8gICAgIG1fZ2FtZUJvYXJkTG9hZGVkID0gZmFsc2U7XHJcblxyXG4vLyAgICAgZnMucmVhZEZpbGUoXCIuLi9HYW1lQm9hcmQxLnR4dFwiLCAoZXJyLCBkYXRhOkJ1ZmZlcikgPT4ge1xyXG4vLyAgICAgICAgIGlmIChlcnIpIHtcclxuLy8gICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciByZWFkaW5nIGZpbGVcIik7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIGVsc2Uge1xyXG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRvd25sb2FkZWQgR2FtZUJvYXJkMS50eHRcIik7XHJcbi8vICAgICAgICAgICAgIHZhciBnYW1lQm9hcmRTdHI6c3RyaW5nID0gZGF0YS50b1N0cmluZygpO1xyXG4vLyAgICAgICAgICAgICBQcm9jZXNzR2FtZWJvYXJkVGV4dChnYW1lQm9hcmRTdHIpO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH0pO1xyXG5cclxuICAgIC8vIFJlYWRGaWxlQXN5bmMoXCIuLi9HYW1lQm9hcmQxLnR4dFwiKS50aGVuKChyZXN1bHQ6QnVmZmVyKSA9PiB7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coXCJEb3dubG9hZGVkIEdhbWVCb2FyZDEudHh0XCIpO1xyXG4gICAgLy8gICAgIHZhciBnYW1lQm9hcmRTdHI6c3RyaW5nID0gcmVzdWx0LnRvU3RyaW5nKCk7XHJcbiAgICAvLyAgICAgUHJvY2Vzc0dhbWVib2FyZFRleHQoZ2FtZUJvYXJkU3RyKTtcclxuXHJcbiAgICAvLyB9KS5jYXRjaCgoZXJyOk5vZGVKUy5FcnJub0V4Y2VwdGlvbikgPT4ge1xyXG5cclxuICAgIC8vICAgICAvLyBOZWVkIHRvIGZhaWwgZXZlcnl0aGluZ1xyXG4gICAgLy8gfSk7XHJcblxyXG5cclxuLy8gfVxyXG5cclxuXHJcblxyXG5jbGFzcyBTcHJpdGVNYXBcclxue1xyXG4gICAgaW1hZ2U6SFRNTEltYWdlRWxlbWVudDtcclxuICAgIHRpbGVQeFNpemU6bnVtYmVyO1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICB0aGlzLmltYWdlLnNyYyA9IE1hemVQYXJ0cztcclxuICAgICAgICB0aGlzLnRpbGVQeFNpemUgPSAxMjtcclxuXHR9XHJcblxyXG4gICAgZHJhd0dhbWVUaWxlKGNvbnRleHQ6Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBkcmF3VG9YOm51bWJlciwgZHJhd1RvWTpudW1iZXIsIHRpbGVYOm51bWJlciwgdGlsZVk6bnVtYmVyKTp2b2lkXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHRpbGVXOm51bWJlciA9IHRoaXMudGlsZVB4U2l6ZTtcclxuICAgICAgICB2YXIgdGlsZUg6bnVtYmVyID0gdGhpcy50aWxlUHhTaXplO1xyXG5cclxuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltYWdlLCBcclxuICAgICAgICAgICAgdGlsZVggKiB0aGlzLnRpbGVQeFNpemUsIHRpbGVZICogdGhpcy50aWxlUHhTaXplLCB0aWxlVywgdGlsZUgsXHJcbiAgICAgICAgICAgIGRyYXdUb1gsIGRyYXdUb1ksIHRpbGVXLCB0aWxlSCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jb25zb2xlLmxvZyhcIkNyZWF0aW5nIFNwcml0ZU1hcFwiKTtcclxuXHJcbnZhciBtX3Nwcml0ZU1hcDpTcHJpdGVNYXAgPSBuZXcgU3ByaXRlTWFwKCk7XHJcblxyXG5mdW5jdGlvbiBEcmF3R2FtZUJvYXJkKGNvbnRleHQ6Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSA6IHZvaWRcclxue1xyXG4gICAgdmFyIGJvYXJkWDpudW1iZXI7XHJcbiAgICB2YXIgYm9hcmRZOm51bWJlcjtcclxuXHJcbiAgICBmb3IgKHZhciBpPTA7aTxtX2dhbWVCb2FyZFRpbGVzLmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgYm9hcmRYID0gbV9nYW1lQm9hcmRUaWxlc1tpXS5zcmNUaWxlWCAqIG1fc3ByaXRlTWFwLnRpbGVQeFNpemU7XHJcbiAgICAgICAgYm9hcmRZID0gbV9nYW1lQm9hcmRUaWxlc1tpXS5zcmNUaWxlWSAqIG1fc3ByaXRlTWFwLnRpbGVQeFNpemU7XHJcblxyXG4gICAgICAgIG1fc3ByaXRlTWFwLmRyYXdHYW1lVGlsZShjb250ZXh0LCBib2FyZFgsIGJvYXJkWSwgbV9nYW1lQm9hcmRUaWxlc1tpXS5kcmF3VGlsZVgsIG1fZ2FtZUJvYXJkVGlsZXNbaV0uZHJhd1RpbGVZKTtcclxuICAgIH1cclxuICAgIFxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gSW5pdGlhbGl6ZSgpIDogYm9vbGVhblxyXG57XHJcbiAgICBpZiAoIVByb2Nlc3NHYW1lYm9hcmRUZXh0KEdhbWVCb2FyZFRleHQpKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgeyBJbml0aWFsaXplLCBEcmF3R2FtZUJvYXJkIH07IiwiZXhwb3J0IGRlZmF1bHQgXCLilI/ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilJPilI/ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilJNcXHJcXG7ilIMuLi4uLi4uLi4uLi7ilIPilIMuLi4uLi4uLi4uLi7ilINcXHJcXG7ilIMu4pSP4pSB4pSB4pSTLuKUj+KUgeKUgeKUgeKUky7ilIPilIMu4pSP4pSB4pSB4pSB4pSTLuKUj+KUgeKUgeKUky7ilINcXHJcXG7ilINP4pSDICDilIMu4pSDICAg4pSDLuKUg+KUgy7ilIMgICDilIMu4pSDICDilINP4pSDXFxyXFxu4pSDLuKUl+KUgeKUgeKUmy7ilJfilIHilIHilIHilJsu4pSX4pSbLuKUl+KUgeKUgeKUgeKUmy7ilJfilIHilIHilJsu4pSDXFxyXFxu4pSDLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi7ilINcXHJcXG7ilIMu4pSP4pSB4pSB4pSTLuKUj+KUky7ilI/ilIHilIHilIHilIHilIHilIHilJMu4pSP4pSTLuKUj+KUgeKUgeKUky7ilINcXHJcXG7ilIMu4pSX4pSB4pSB4pSbLuKUg+KUgy7ilJfilIHilIHilJPilI/ilIHilIHilJsu4pSD4pSDLuKUl+KUgeKUgeKUmy7ilINcXHJcXG7ilIMuLi4uLi7ilIPilIMuLi4u4pSD4pSDLi4uLuKUg+KUgy4uLi4uLuKUg1xcclxcbuKUl+KUgeKUgeKUgeKUgeKUky7ilIPilJfilIHilIHilJMg4pSD4pSDIOKUj+KUgeKUgeKUm+KUgy7ilI/ilIHilIHilIHilIHilJtcXHJcXG4gICAgIOKUgy7ilIPilI/ilIHilIHilJsg4pSX4pSbIOKUl+KUgeKUgeKUk+KUgy7ilIMgICAgIFxcclxcbiAgICAg4pSDLuKUg+KUgyAgICAgICAgICDilIPilIMu4pSDICAgICBcXHJcXG4gICAgIOKUgy7ilIPilIMg4pSP4pSB4pSB4pSB4pSB4pSB4pSB4pSTIOKUg+KUgy7ilIMgICAgIFxcclxcbuKUgeKUgeKUgeKUgeKUgeKUmy7ilJfilJsg4pSDICAgICAg4pSDIOKUl+KUmy7ilJfilIHilIHilIHilIHilIFcXHJcXG4gICAgICAuICAg4pSDICAgICAg4pSDICAgLiAgICAgIFxcclxcbuKUgeKUgeKUgeKUgeKUgeKUky7ilI/ilJMg4pSDICAgICAg4pSDIOKUj+KUky7ilI/ilIHilIHilIHilIHilIFcXHJcXG4gICAgIOKUgy7ilIPilIMg4pSX4pSB4pSB4pSB4pSB4pSB4pSB4pSbIOKUg+KUgy7ilIMgICAgIFxcclxcbiAgICAg4pSDLuKUg+KUgyAgICAgICAgICDilIPilIMu4pSDICAgICBcXHJcXG4gICAgIOKUgy7ilIPilIMg4pSP4pSB4pSB4pSB4pSB4pSB4pSB4pSTIOKUg+KUgy7ilIMgICAgIFxcclxcbuKUj+KUgeKUgeKUgeKUgeKUmy7ilJfilJsg4pSX4pSB4pSB4pST4pSP4pSB4pSB4pSbIOKUl+KUmy7ilJfilIHilIHilIHilIHilJNcXHJcXG7ilIMuLi4uLi4uLi4uLi7ilIPilIMuLi4uLi4uLi4uLi7ilINcXHJcXG7ilIMu4pSP4pSB4pSB4pSTLuKUj+KUgeKUgeKUgeKUky7ilIPilIMu4pSP4pSB4pSB4pSB4pSTLuKUj+KUgeKUgeKUky7ilINcXHJcXG7ilIMu4pSX4pSB4pST4pSDLuKUl+KUgeKUgeKUgeKUmy7ilJfilJsu4pSX4pSB4pSB4pSB4pSbLuKUg+KUj+KUgeKUmy7ilINcXHJcXG7ilINPLi7ilIPilIMuLi4uLi4uICAuLi4uLi4u4pSD4pSDLi5P4pSDXFxyXFxu4pSX4pSB4pSTLuKUg+KUgy7ilI/ilJMu4pSP4pSB4pSB4pSB4pSB4pSB4pSB4pSTLuKUj+KUky7ilIPilIMu4pSP4pSB4pSbXFxyXFxu4pSP4pSB4pSbLuKUl+KUmy7ilIPilIMu4pSX4pSB4pSB4pST4pSP4pSB4pSB4pSbLuKUg+KUgy7ilJfilJsu4pSX4pSB4pSTXFxyXFxu4pSDLi4uLi4u4pSD4pSDLi4uLuKUg+KUgy4uLi7ilIPilIMuLi4uLi7ilINcXHJcXG7ilIMu4pSP4pSB4pSB4pSB4pSB4pSb4pSX4pSB4pSB4pSTLuKUg+KUgy7ilI/ilIHilIHilJvilJfilIHilIHilIHilIHilJMu4pSDXFxyXFxu4pSDLuKUl+KUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUmy7ilJfilJsu4pSX4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSbLuKUg1xcclxcbuKUgy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u4pSDXFxyXFxu4pSX4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSbXCIiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJmYjBmM2NkNDBmMWNhYmZkMTM2MjA0ZmI5ODM1Y2Y0Mi5wbmdcIjsiLCJ2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vcGFjbWFuX3N0eWxlLmNzc1wiKTtcblxuaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG59XG5cbnZhciBvcHRpb25zID0ge31cblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYgKGNvbnRlbnQubG9jYWxzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG59XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKShmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImh0bWwsIGJvZHkge1xcclxcbiAgbWFyZ2luOiAwO1xcclxcbn1cXHJcXG5cXHJcXG5odG1sIHtcXHJcXG4gIGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmO1xcclxcbiAgaGVpZ2h0OiAxMDAlO1xcclxcbn1cXHJcXG5cXHJcXG5ib2R5IHtcXHJcXG4gIGJhY2tncm91bmQ6ICM4NEFBQjI7XFxyXFxufVxcclxcblxcclxcblxcclxcblxcclxcbmE6bGluayB7XFxyXFxuXFxyXFxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxyXFxuICBjb2xvcjogd2hpdGU7XFxyXFxufVxcclxcblxcclxcbi5kaXZoZWFkZXJiYXIge1xcclxcbiAgZGlzcGxheTogZ3JpZDtcXHJcXG4gIGJhY2tncm91bmQ6ICMzNjRCNEM7XFxyXFxuICB3aWR0aDogMTAwJTtcXHJcXG4gIHBhZGRpbmc6IDIwcHggNDBweDtcXHJcXG59XFxyXFxuXFxyXFxuLmRpdmdhbWVjb250YWluZXIge1xcclxcbiAgaGVpZ2h0OmluaGVyaXQ7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgd2lkdGg6IDc2OHB4O1xcclxcbiAgLyogT3JkZXJzIGl0ZW1zIHRvcC1ib3R0b20gKi9cXHJcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxyXFxuICBiYWNrZ3JvdW5kOiAjNjc4Nzg3O1xcclxcblxcclxcbiAgLyogQWxsb3dzIHRoZSBkaXYgdG8gc2l6ZSBpdHNlbGYgYWNjb3JkaW5nIHRvIHRoZSBjaGlsZHJlbiBhbmQgY2VudGVyIGl0c2VsZi4gKi9cXHJcXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xcclxcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xcclxcbn1cXHJcXG5cXHJcXG4udGl0bGUge1xcclxcbiAgLyogRm9yY2VzIHRpdGxlIGNhcmQgdG8gY2VudGVyIGl0c2VsZiAqL1xcclxcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XFxyXFxuICBtYXJnaW4tcmlnaHQ6IGF1dG87XFxyXFxuICBtYXJnaW4tdG9wOiA0MHB4O1xcclxcbiAgaGVpZ2h0OiA0MHB4O1xcclxcbn1cXHJcXG5cXHJcXG5jYW52YXMge1xcclxcbiAgLyogQ2FudmFzIHdpZHRoL2hlaWdodCBzZXQgaW4gY29kZSAqL1xcclxcbiAgbWFyZ2luLXRvcDogMzBweDtcXHJcXG4gIG1hcmdpbi1sZWZ0OiAyMHB4O1xcclxcbiAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xcclxcbn1cIiwgXCJcIl0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVzZVNvdXJjZU1hcCkge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCJ7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IG1vZHVsZXNbX2ldOyAvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG4gICAgICAvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuICAgICAgLy8gd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxuICAgICAgLy8gSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXG4gICAgICBpZiAoaXRlbVswXSA9PSBudWxsIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGlmIChtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIihcIi5jb25jYXQoaXRlbVsyXSwgXCIpIGFuZCAoXCIpLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIilcIik7XG4gICAgICAgIH1cblxuICAgICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCkuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucykge1xuICB2YXIgc3R5bGVzID0gW107XG4gIHZhciBuZXdTdHlsZXMgPSB7fTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNzcyA9IGl0ZW1bMV07XG4gICAgdmFyIG1lZGlhID0gaXRlbVsyXTtcbiAgICB2YXIgc291cmNlTWFwID0gaXRlbVszXTtcbiAgICB2YXIgcGFydCA9IHtcbiAgICAgIGNzczogY3NzLFxuICAgICAgbWVkaWE6IG1lZGlhLFxuICAgICAgc291cmNlTWFwOiBzb3VyY2VNYXBcbiAgICB9O1xuXG4gICAgaWYgKCFuZXdTdHlsZXNbaWRdKSB7XG4gICAgICBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge1xuICAgICAgICBpZDogaWQsXG4gICAgICAgIHBhcnRzOiBbcGFydF1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBzdHlsZXNbaV07XG4gICAgdmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG4gICAgdmFyIGogPSAwO1xuXG4gICAgaWYgKGRvbVN0eWxlKSB7XG4gICAgICBkb21TdHlsZS5yZWZzKys7XG5cbiAgICAgIGZvciAoOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHBhcnRzID0gW107XG5cbiAgICAgIGZvciAoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcbiAgICAgIH1cblxuICAgICAgc3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7XG4gICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICByZWZzOiAxLFxuICAgICAgICBwYXJ0czogcGFydHNcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgb3B0aW9ucy5hdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMob3B0aW9ucy5hdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBvcHRpb25zLmF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgb3B0aW9ucy5hdHRyaWJ1dGVzID0gdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlcyA9PT0gJ29iamVjdCcgPyBvcHRpb25zLmF0dHJpYnV0ZXMgOiB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICB2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuICBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICB2YXIgbWF5UmVtb3ZlID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBzdHlsZXNbaV07XG4gICAgICB2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuICAgICAgaWYgKGRvbVN0eWxlKSB7XG4gICAgICAgIGRvbVN0eWxlLnJlZnMtLTtcbiAgICAgICAgbWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChuZXdMaXN0KSB7XG4gICAgICB2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgICAgYWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbWF5UmVtb3ZlLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9kb21TdHlsZSA9IG1heVJlbW92ZVtfaV07XG5cbiAgICAgIGlmIChfZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IF9kb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIF9kb21TdHlsZS5wYXJ0c1tqXSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIHN0eWxlc0luRG9tW19kb21TdHlsZS5pZF07XG4gICAgICB9XG4gICAgfVxuICB9O1xufTsiXSwic291cmNlUm9vdCI6IiJ9