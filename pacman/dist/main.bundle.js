!function(n){var e={};function r(t){if(e[t])return e[t].exports;var o=e[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=n,r.c=e,r.d=function(n,e,t){r.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)r.d(t,o,function(e){return n[e]}.bind(null,o));return t},r.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(e,"a",e),e},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r.p="",r(r.s=0)}([function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const t=r(1);r(4),console.log("Starting game logic...");var o=document.querySelector("canvas"),i=o.getContext("2d");o.width=700,o.height=700;console.log("Initializing SpriteOperations..."),t.Initialize()?(console.log("Sprites initialized! Starting game loop..."),function n(e){t.DrawGameBoard(i),requestAnimationFrame(n)}()):console.log("Sprites failed to load!")},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const t=r(2);r(3);class o{constructor(n,e,r,t){this.srcTileX=n,this.srcTileY=e,this.drawTileX=r,this.drawTileY=t}}var i=!1,a=null,s=-1,c=-1;e.DrawGameBoard=function(n){return!!i},e.Initialize=function(){return!!function(n){console.log("Printing gameboard text..."),console.log(n);var e=n.split("\n");s=e[0].length,c=e.length;for(var r=0;r<e.length;r++)if(e[r].length!==s)return console.log("ERROR: Line "+r+" does not have the correct number of tiles! Map is malformed!"),!1;for(a=new Array,r=0;r<e.length;r++)for(var t=e[r],l=0;l<t.length;l++)switch(t[l]){case"┏":case"━":case"┓":case"┃":case"┗":case"┛":a.push(new o(r,l,0,0));break;case".":case"O":case" ":break;default:return console.log("ERROR: Unhandle char: '"+t[l]+"' at i,j="+r+","+l),!1}return console.log("Processed Gameboard. Width="+s+", Height="+c),i=!0,!0}(t.default)&&(i=!0,!0)}},function(n,e,r){"use strict";r.r(e),e.default="┏━━━━━━━━━━━━┓┏━━━━━━━━━━━━┓\r\n┃............┃┃............┃\r\n┃.┏━━┓.┏━━━┓.┃┃.┏━━━┓.┏━━┓.┃\r\n┃O┃  ┃.┃   ┃.┃┃.┃   ┃.┃  ┃O┃\r\n┃.┗━━┛.┗━━━┛.┗┛.┗━━━┛.┗━━┛.┃\r\n┃..........................┃\r\n┃.┏━━┓.┏┓.┏━━━━━━┓.┏┓.┏━━┓.┃\r\n┃.┗━━┛.┃┃.┗━━┓┏━━┛.┃┃.┗━━┛.┃\r\n┃......┃┃....┃┃....┃┃......┃\r\n┗━━━━┓.┃┗━━┓ ┃┃ ┏━━┛┃.┏━━━━┛\r\n     ┃.┃┏━━┛ ┗┛ ┗━━┓┃.┃     \r\n     ┃.┃┃          ┃┃.┃     \r\n     ┃.┃┃ ┏━━━━━━┓ ┃┃.┃     \r\n━━━━━┛.┗┛ ┃      ┃ ┗┛.┗━━━━━\r\n      .   ┃      ┃   .      \r\n━━━━━┓.┏┓ ┃      ┃ ┏┓.┏━━━━━\r\n     ┃.┃┃ ┗━━━━━━┛ ┃┃.┃     \r\n     ┃.┃┃          ┃┃.┃     \r\n     ┃.┃┃ ┏━━━━━━┓ ┃┃.┃     \r\n┏━━━━┛.┗┛ ┗━━┓┏━━┛ ┗┛.┗━━━━┓\r\n┃............┃┃............┃\r\n┃.┏━━┓.┏━━━┓.┃┃.┏━━━┓.┏━━┓.┃\r\n┃.┗━┓┃.┗━━━┛.┗┛.┗━━━┛.┃┏━┛.┃\r\n┃O..┃┃.......  .......┃┃..O┃\r\n┗━┓.┃┃.┏┓.┏━━━━━━┓.┏┓.┃┃.┏━┛\r\n┏━┛.┗┛.┃┃.┗━━┓┏━━┛.┃┃.┗┛.┗━┓\r\n┃......┃┃....┃┃....┃┃......┃\r\n┃.┏━━━━┛┗━━┓.┃┃.┏━━┛┗━━━━┓.┃\r\n┃.┗━━━━━━━━┛.┗┛.┗━━━━━━━━┛.┃\r\n┃..........................┃\r\n┗━━━━━━━━━━━━━━━━━━━━━━━━━━┛"},function(n,e,r){n.exports=r.p+"fb0f3cd40f1cabfd136204fb9835cf42.png"},function(n,e,r){var t=r(5);"string"==typeof t&&(t=[[n.i,t,""]]);var o={insert:"head",singleton:!1};r(7)(t,o);t.locals&&(n.exports=t.locals)},function(n,e,r){(n.exports=r(6)(!1)).push([n.i,"html, body {\r\n  margin: 0;\r\n}\r\n\r\nhtml {\r\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\r\n  height: 100%;\r\n}\r\n\r\nbody {\r\n  background: #84AAB2;\r\n}\r\n\r\n\r\n\r\na:link {\r\n\r\n  text-decoration: none;\r\n  color: white;\r\n}\r\n\r\n.divheaderbar {\r\n  display: grid;\r\n  background: #364B4C;\r\n  width: 100%;\r\n  padding: 20px 40px;\r\n}\r\n\r\n.divgamecontainer {\r\n  height:inherit;\r\n  display: flex;\r\n  width: 768px;\r\n  /* Orders items top-bottom */\r\n  flex-direction: column;\r\n  background: #678787;\r\n\r\n  /* Allows the div to size itself according to the children and center itself. */\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\n.title {\r\n  /* Forces title card to center itself */\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-top: 40px;\r\n  height: 40px;\r\n}\r\n\r\ncanvas {\r\n  /* Canvas width/height set in code */\r\n  margin-top: 30px;\r\n  margin-left: 20px;\r\n  margin-right: 20px;\r\n}",""])},function(n,e,r){"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var r=function(n,e){var r=n[1]||"",t=n[3];if(!t)return r;if(e&&"function"==typeof btoa){var o=(a=t,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=t.sources.map((function(n){return"/*# sourceURL=".concat(t.sourceRoot).concat(n," */")}));return[r].concat(i).concat([o]).join("\n")}var a,s,c;return[r].join("\n")}(e,n);return e[2]?"@media ".concat(e[2],"{").concat(r,"}"):r})).join("")},e.i=function(n,r){"string"==typeof n&&(n=[[null,n,""]]);for(var t={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(t[i]=!0)}for(var a=0;a<n.length;a++){var s=n[a];null!=s[0]&&t[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="(".concat(s[2],") and (").concat(r,")")),e.push(s))}},e}},function(n,e,r){"use strict";var t,o={},i=function(){return void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t},a=function(){var n={};return function(e){if(void 0===n[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(n){r=null}n[e]=r}return n[e]}}();function s(n,e){for(var r=[],t={},o=0;o<n.length;o++){var i=n[o],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};t[a]?t[a].parts.push(s):r.push(t[a]={id:a,parts:[s]})}return r}function c(n,e){for(var r=0;r<n.length;r++){var t=n[r],i=o[t.id],a=0;if(i){for(i.refs++;a<i.parts.length;a++)i.parts[a](t.parts[a]);for(;a<t.parts.length;a++)i.parts.push(v(t.parts[a],e))}else{for(var s=[];a<t.parts.length;a++)s.push(v(t.parts[a],e));o[t.id]={id:t.id,refs:1,parts:s}}}}function l(n){var e=document.createElement("style");if(void 0===n.attributes.nonce){var t=r.nc;t&&(n.attributes.nonce=t)}if(Object.keys(n.attributes).forEach((function(r){e.setAttribute(r,n.attributes[r])})),"function"==typeof n.insert)n.insert(e);else{var o=a(n.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var u,f=(u=[],function(n,e){return u[n]=e,u.filter(Boolean).join("\n")});function d(n,e,r,t){var o=r?"":t.css;if(n.styleSheet)n.styleSheet.cssText=f(e,o);else{var i=document.createTextNode(o),a=n.childNodes;a[e]&&n.removeChild(a[e]),a.length?n.insertBefore(i,a[e]):n.appendChild(i)}}function p(n,e,r){var t=r.css,o=r.media,i=r.sourceMap;if(o&&n.setAttribute("media",o),i&&btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}var h=null,g=0;function v(n,e){var r,t,o;if(e.singleton){var i=g++;r=h||(h=l(e)),t=d.bind(null,r,i,!1),o=d.bind(null,r,i,!0)}else r=l(e),t=p.bind(null,r,e),o=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(r)};return t(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;t(n=e)}else o()}}n.exports=function(n,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i());var r=s(n,e);return c(r,e),function(n){for(var t=[],i=0;i<r.length;i++){var a=r[i],l=o[a.id];l&&(l.refs--,t.push(l))}n&&c(s(n,e),e);for(var u=0;u<t.length;u++){var f=t[u];if(0===f.refs){for(var d=0;d<f.parts.length;d++)f.parts[d]();delete o[f.id]}}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcGFjbWFuL3NyYy9QYWNtYW5NYWluLnRzIiwid2VicGFjazovLy8uL3BhY21hbi9zcmMvU3ByaXRlT3BlcmF0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9wYWNtYW4vc3JjL0dhbWVCb2FyZDEudHh0Iiwid2VicGFjazovLy8uL3BhY21hbi9zcmMvc3ByaXRlbWFwLTM4NC5wbmciLCJ3ZWJwYWNrOi8vLy4vcGFjbWFuL3NyYy9wYWNtYW5fc3R5bGUuY3NzP2U0YmMiLCJ3ZWJwYWNrOi8vLy4vcGFjbWFuL3NyYy9wYWNtYW5fc3R5bGUuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY29uc29sZSIsImxvZyIsImNhbnZhcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImN0eCIsImdldENvbnRleHQiLCJ3aWR0aCIsImhlaWdodCIsIlNwcml0ZU9wZXJhdGlvbnMiLCJJbml0aWFsaXplIiwibG9vcCIsInRpbWVzdGFtcCIsIkRyYXdHYW1lQm9hcmQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJUaWxlIiwic3JjWCIsInNyY1kiLCJkcmF3WCIsImRyYXdZIiwidGhpcyIsInNyY1RpbGVYIiwic3JjVGlsZVkiLCJkcmF3VGlsZVgiLCJkcmF3VGlsZVkiLCJtX2dhbWVCb2FyZExvYWRlZCIsIm1fZ2FtZUJvYXJkVGlsZXMiLCJtX2dhbWVCb2FyZFdpZHRoIiwibV9nYW1lQm9hcmRIZWlnaHQiLCJjb250ZXh0IiwiZ2FtZUJvYXJkU3RyIiwiZ2FtZUJvYXJkUm93cyIsInNwbGl0IiwibGVuZ3RoIiwiQXJyYXkiLCJyb3ciLCJqIiwicHVzaCIsIlByb2Nlc3NHYW1lYm9hcmRUZXh0IiwiY29udGVudCIsIm9wdGlvbnMiLCJsb2NhbHMiLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJtYXAiLCJpdGVtIiwiY3NzTWFwcGluZyIsImJ0b2EiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlTWFwIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImNvbmNhdCIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlIiwic291cmNlUm9vdCIsImpvaW4iLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJpZCIsIl9pIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIkJvb2xlYW4iLCJ3aW5kb3ciLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJlIiwibGlzdFRvU3R5bGVzIiwic3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsInBhcnRzIiwiYWRkU3R5bGVzVG9Eb20iLCJkb21TdHlsZSIsInJlZnMiLCJhZGRTdHlsZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJub25jZSIsImtleXMiLCJmb3JFYWNoIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwiaW5kZXgiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJvYmoiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsIl9kb21TdHlsZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFB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USxDQUNWLEdBQUlBLEVBQU96QyxNQUFReUIsRUFBSXpCLEtBQU95QyxFQUFPeEMsUUFBVXdCLEVBQUl4QixPQUFTd0MsRUFBTzlFLFlBQWM4RCxFQUFJOUQsVUFDbkYsT0FHRjBFLEVBQU9aLEVBQU1nQixRQUViakIsS0FLTmhKLEVBQU9ELFFBQVUsU0FBVTZFLEVBQU1ILElBQy9CQSxFQUFVQSxHQUFXLElBQ2J5RCxXQUEyQyxpQkFBdkJ6RCxFQUFReUQsV0FBMEJ6RCxFQUFReUQsV0FBYSxHQUc5RXpELEVBQVFrRixXQUEwQyxrQkFBdEJsRixFQUFRa0YsWUFDdkNsRixFQUFRa0YsVUFBWXBELEtBR3RCLElBQUlhLEVBQVNELEVBQWF2QyxFQUFNSCxHQUVoQyxPQURBa0QsRUFBZVAsRUFBUTNDLEdBQ2hCLFNBQWdCeUYsR0FHckIsSUFGQSxJQUFJQyxFQUFZLEdBRVBsSyxFQUFJLEVBQUdBLEVBQUltSCxFQUFPbEQsT0FBUWpFLElBQUssQ0FDdEMsSUFBSThFLEVBQU9xQyxFQUFPbkgsR0FDZDJILEVBQVd0QixFQUFZdkIsRUFBS29CLElBRTVCeUIsSUFDRkEsRUFBU0MsT0FDVHNDLEVBQVU3RixLQUFLc0QsSUFJZnNDLEdBRUZ2QyxFQURnQlIsRUFBYStDLEVBQVN6RixHQUNaQSxHQUc1QixJQUFLLElBQUkyQixFQUFLLEVBQUdBLEVBQUsrRCxFQUFVakcsT0FBUWtDLElBQU0sQ0FDNUMsSUFBSWdFLEVBQVlELEVBQVUvRCxHQUUxQixHQUF1QixJQUFuQmdFLEVBQVV2QyxLQUFZLENBQ3hCLElBQUssSUFBSXhELEVBQUksRUFBR0EsRUFBSStGLEVBQVUxQyxNQUFNeEQsT0FBUUcsSUFDMUMrRixFQUFVMUMsTUFBTXJELFlBR1hpQyxFQUFZOEQsRUFBVWpFIiwiZmlsZSI6Im1haW4uYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiXHJcbmltcG9ydCAqIGFzIFNwcml0ZU9wZXJhdGlvbnMgZnJvbSAnLi9TcHJpdGVPcGVyYXRpb25zJztcclxuXHJcbi8vIEltcG9ydCBhbnkgYXNzZXRzIHRoYXQgbmVlZCB0byBiZSBwYWNrYWdlZCB1cCB1c2luZyBXZWJQYWNrXHJcbmltcG9ydCAnLi9wYWNtYW5fc3R5bGUuY3NzJztcclxuXHJcblxyXG5jb25zb2xlLmxvZyhcIlN0YXJ0aW5nIGdhbWUgbG9naWMuLi5cIik7XHJcblxyXG52YXIgY2FudmFzOkhUTUxDYW52YXNFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XHJcbnZhciBjdHg6Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG52YXIgd2lkdGg6bnVtYmVyID0gY2FudmFzLndpZHRoID0gNzAwO1xyXG52YXIgaGVpZ2h0Om51bWJlciA9IGNhbnZhcy5oZWlnaHQgPSA3MDA7XHJcblxyXG5cclxuXHJcbi8vIGRlZmluZSBsb29wIHRoYXQga2VlcHMgZHJhd2luZyB0aGUgc2NlbmUgY29uc3RhbnRseVxyXG5mdW5jdGlvbiBsb29wKHRpbWVzdGFtcDpudW1iZXIpOnZvaWQgXHJcbntcclxuXHJcbiAgICBTcHJpdGVPcGVyYXRpb25zLkRyYXdHYW1lQm9hcmQoY3R4KTtcclxuXHJcblx0Ly8gVGhpcyBtZXRob2Qgd2lsbCBhaW0gZm9yIDYwIGZwcyBkZXBlbmRpbmcgb24geW91ciBtb25pdG9yIHJlZnJlc2ggcmF0ZSxcclxuXHQvLyBhbmQgaXMgYWx3YXlzIGNhbGxlZCBiZWZvcmUgdGhlIG5leHQgYnVmZmVyIGRyYXduIGluIHRoZSBicm93c2VyLlxyXG5cdC8vIFRoaXMgaXMgYSBzcGVjaWFsIG1ldGhvZCBvcHRpbWl6ZWQgZm9yIGFuaW1hdGlvbnMuXHJcblx0Ly8gVGhlIG1ldGhvZCB3aWxsIG5vdCBydW4gaWYgdGhlIGNhbnZhcyBpcyBvZmZzY3JlZW4gKEknbGwgbmVlZCB0byB2ZXJpZnkpLlxyXG5cdC8vIENhbiBiZSBjYW5jZWxsZWQgdXNpbmcgY2FuY2VsQW5pbWF0aW9uRnJhbWUoKVxyXG5cdHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxufVxyXG5cclxuXHJcblxyXG5jb25zb2xlLmxvZyhcIkluaXRpYWxpemluZyBTcHJpdGVPcGVyYXRpb25zLi4uXCIpO1xyXG5cclxuaWYgKFNwcml0ZU9wZXJhdGlvbnMuSW5pdGlhbGl6ZSgpKVxyXG57XHJcblx0Y29uc29sZS5sb2coXCJTcHJpdGVzIGluaXRpYWxpemVkISBTdGFydGluZyBnYW1lIGxvb3AuLi5cIik7XHJcblxyXG5cdC8vIFNwcml0ZXMgaW5pdGlhbGl6ZWQuIFN0YXJ0IGdhbWUgbG9vcC5cclxuXHRsb29wKDApO1xyXG59XHJcbmVsc2Vcclxue1xyXG5cdGNvbnNvbGUubG9nKFwiU3ByaXRlcyBmYWlsZWQgdG8gbG9hZCFcIik7XHJcblx0Ly8gU2hvdyBlcnJvciBkaXNwbGF5XHJcblxyXG59XHJcblxyXG5cclxuIiwiLy92YXIgZnMgPSByZXF1aXJlKCdmcycpOyAvKiBjb21tb25KcyBzeW50YXggKi9cclxuLy8gaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnOyAvLyBEb24ndCBuZWVkIGZzIHJpZ2h0IG5vdy4uLlxyXG5cclxuLy8gSW1wb3J0IGFzc2V0cyB0aGF0IG5lZWQgdG8gYmUgcGFja2FnZWQgdXAgdXNpbmcgV2ViUGFja1xyXG5pbXBvcnQgR2FtZUJvYXJkVGV4dCBmcm9tICcuL0dhbWVCb2FyZDEudHh0JztcclxuaW1wb3J0IE1hemVQYXJ0cyBmcm9tICcuL3Nwcml0ZW1hcC0zODQucG5nJztcclxuXHJcblxyXG4vKiBHYW1lIGJvYXJkIHdpbGwgdXNlIGEgMjh4MzEgdGlsZSBzZXQsIHJlbmRlcmVkIGZyb20gdGhlIHNwcml0ZSBtYXAgKHNwcml0ZW1hcC0zODQucG5nKS4gXHJcblRoZSBjYW52YXMgc2l6ZSB3aWxsIGV4YWN0bHkgbWF0Y2ggdGhlIHNpemUgb2YgdGhlIGxhaWQgb3V0IHRpbGUgc2V0LiBcclxuRWFjaCB0aWxlIHdpbGwgYmUgMjR4MjQgcGl4ZWxzLiBcclxuVGhpcyBtZWFucyB0aGUgZ2FtZSBib2FyZOKAmXMgcGl4ZWwgZGltZW5zaW9ucyBhcmU6IDY3Mng3NDQuICovXHJcblxyXG4vKiBUaGlzIGRvY3VtZW50IHdpbGwgbWFwIGEgY2hhcmFjdGVyIGZyb20gdGhlIHNwcml0ZSBtYXAgdG8gYSB0aWxlIGluZGV4LiAqL1xyXG5cclxuXHJcbi8vIE9uIHN1Y2Nlc3MsIHJldHVybnMgdGhlIGZpbGUgZGF0YVxyXG4vLyBPbiBmYWlsdXJlLCByZXR1cm5zIHRoZSBFcnJvck5vRXhjZXB0aW9uXHJcbi8vIGZ1bmN0aW9uIFJlYWRGaWxlQXN5bmMoZmlsZW5hbWU6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICBcclxuLy8gICAgIHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLHJlamVjdCkgPT4ge1xyXG4vLyAgICAgICAgIGZzLnJlYWRGaWxlKGZpbGVuYW1lLCAoZXJyLCBkYXRhOkJ1ZmZlcikgPT4ge1xyXG4vLyAgICAgICAgICAgICBpZiAoZXJyKSBcclxuLy8gICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4vLyAgICAgICAgICAgICBlbHNlIFxyXG4vLyAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcclxuLy8gICAgICAgICB9KTtcclxuLy8gICAgIH0pO1xyXG4vLyB9XHJcblxyXG5cclxuXHJcbmNsYXNzIFRpbGUge1xyXG4gICAgc3JjVGlsZVg6bnVtYmVyO1xyXG4gICAgc3JjVGlsZVk6bnVtYmVyO1xyXG4gICAgZHJhd1RpbGVYOm51bWJlcjtcclxuICAgIGRyYXdUaWxlWTpudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3JjWDpudW1iZXIsIHNyY1k6bnVtYmVyLCBkcmF3WDpudW1iZXIsIGRyYXdZOm51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc3JjVGlsZVggPSBzcmNYO1xyXG4gICAgICAgIHRoaXMuc3JjVGlsZVkgPSBzcmNZO1xyXG4gICAgICAgIHRoaXMuZHJhd1RpbGVYID0gZHJhd1g7XHJcbiAgICAgICAgdGhpcy5kcmF3VGlsZVkgPSBkcmF3WTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIG1fZ2FtZUJvYXJkTG9hZGVkOmJvb2xlYW4gPSBmYWxzZTtcclxudmFyIG1fZ2FtZUJvYXJkVGlsZXM6VGlsZVtdID0gbnVsbDtcclxudmFyIG1fZ2FtZUJvYXJkV2lkdGg6bnVtYmVyID0gLTE7XHJcbnZhciBtX2dhbWVCb2FyZEhlaWdodDpudW1iZXIgPSAtMTtcclxuXHJcbmZ1bmN0aW9uIFByb2Nlc3NHYW1lYm9hcmRUZXh0KGdhbWVCb2FyZFN0cjpzdHJpbmcpIDogYm9vbGVhblxyXG57XHJcbiAgICB2YXIgY2hhckNvdW50Om51bWJlciA9IDA7XHJcbiBcclxuICAgIGNvbnNvbGUubG9nKFwiUHJpbnRpbmcgZ2FtZWJvYXJkIHRleHQuLi5cIik7XHJcbiAgICBjb25zb2xlLmxvZyhnYW1lQm9hcmRTdHIpO1xyXG5cclxuICAgIHZhciBnYW1lQm9hcmRSb3dzID0gZ2FtZUJvYXJkU3RyLnNwbGl0KCdcXG4nKTtcclxuICAgIFxyXG4gICAgLy8gVGhlIGZpcnN0IHJvdyB3aWxsIGRldGVybWluZSB0aGUgbWFwIHdpZHRoXHJcbiAgICBtX2dhbWVCb2FyZFdpZHRoID0gZ2FtZUJvYXJkUm93c1swXS5sZW5ndGg7XHJcbiAgICBtX2dhbWVCb2FyZEhlaWdodCA9IGdhbWVCb2FyZFJvd3MubGVuZ3RoO1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayB0byBtYWtlIHN1cmUgd2UgaGF2ZSB0aGUgY29ycmVjdCBudW1iZXIgb2YgbWFwIHRpbGVzXHJcbiAgICAvLyBNYWtlIHN1cmUgdGhlcmUgaXNuJ3QgYSBuZXdsaW5lIGFmdGVyIHRoZSBsYXN0IGxpbmUuIFRoYXQgd2lsbCB0cmlwIHRoaXMgZXJyb3IuXHJcbiAgICBmb3IodmFyIGk9MDtpPGdhbWVCb2FyZFJvd3MubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZiAoZ2FtZUJvYXJkUm93c1tpXS5sZW5ndGggIT09IG1fZ2FtZUJvYXJkV2lkdGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SOiBMaW5lIFwiICsgaSArIFwiIGRvZXMgbm90IGhhdmUgdGhlIGNvcnJlY3QgbnVtYmVyIG9mIHRpbGVzISBNYXAgaXMgbWFsZm9ybWVkIVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJbml0aWFsaXplIHRoZSB0aWxlc1xyXG4gICAgbV9nYW1lQm9hcmRUaWxlcyA9IG5ldyBBcnJheTxUaWxlPigpO1xyXG5cclxuICAgIGZvcihpPTA7aTxnYW1lQm9hcmRSb3dzLmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHJvdzpzdHJpbmcgPSBnYW1lQm9hcmRSb3dzW2ldO1xyXG5cclxuICAgICAgICBmb3IodmFyIGo9MDtqPHJvdy5sZW5ndGg7aisrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3dpdGNoKHJvd1tqXSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAn4pSPJzp7XHJcbiAgICAgICAgICAgICAgICAgICAgbV9nYW1lQm9hcmRUaWxlcy5wdXNoKG5ldyBUaWxlKGksaiwwLDApKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgJ+KUgSc6e1xyXG4gICAgICAgICAgICAgICAgICAgIG1fZ2FtZUJvYXJkVGlsZXMucHVzaChuZXcgVGlsZShpLGosMCwwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlICfilJMnOntcclxuICAgICAgICAgICAgICAgICAgICBtX2dhbWVCb2FyZFRpbGVzLnB1c2gobmV3IFRpbGUoaSxqLDAsMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAn4pSDJzp7XHJcbiAgICAgICAgICAgICAgICAgICAgbV9nYW1lQm9hcmRUaWxlcy5wdXNoKG5ldyBUaWxlKGksaiwwLDApKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgJ+KUlyc6e1xyXG4gICAgICAgICAgICAgICAgICAgIG1fZ2FtZUJvYXJkVGlsZXMucHVzaChuZXcgVGlsZShpLGosMCwwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlICfilJsnOntcclxuICAgICAgICAgICAgICAgICAgICBtX2dhbWVCb2FyZFRpbGVzLnB1c2gobmV3IFRpbGUoaSxqLDAsMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAnLic6e1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAnTyc6e1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAnICc6e1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgYW4gZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SOiBVbmhhbmRsZSBjaGFyOiAnXCIgKyByb3dbal0gKyBcIicgYXQgaSxqPVwiICsgaSArIFwiLFwiICsgaik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJQcm9jZXNzZWQgR2FtZWJvYXJkLiBXaWR0aD1cIiArIG1fZ2FtZUJvYXJkV2lkdGggKyBcIiwgSGVpZ2h0PVwiICsgbV9nYW1lQm9hcmRIZWlnaHQpO1xyXG4gICAgbV9nYW1lQm9hcmRMb2FkZWQgPSB0cnVlO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vLyBFdmVudHVhbGx5LCB0aGlzIHdpbGwgcmV0dXJuIGEgcHJvbWlzZSBzbyB0aGF0IGFsbCBhc3NldHMgYXJlIGRvd25sb2FkZWQgYXN5bmNocm9ub3VzbHlcclxuLy8gZnVuY3Rpb24gRG93bmxvYWRBbGxBc3NldHMoKSA6IHZvaWQge1xyXG5cclxuLy8gICAgIG1fZ2FtZUJvYXJkTG9hZGVkID0gZmFsc2U7XHJcblxyXG4vLyAgICAgZnMucmVhZEZpbGUoXCIuLi9HYW1lQm9hcmQxLnR4dFwiLCAoZXJyLCBkYXRhOkJ1ZmZlcikgPT4ge1xyXG4vLyAgICAgICAgIGlmIChlcnIpIHtcclxuLy8gICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciByZWFkaW5nIGZpbGVcIik7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIGVsc2Uge1xyXG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRvd25sb2FkZWQgR2FtZUJvYXJkMS50eHRcIik7XHJcbi8vICAgICAgICAgICAgIHZhciBnYW1lQm9hcmRTdHI6c3RyaW5nID0gZGF0YS50b1N0cmluZygpO1xyXG4vLyAgICAgICAgICAgICBQcm9jZXNzR2FtZWJvYXJkVGV4dChnYW1lQm9hcmRTdHIpO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH0pO1xyXG5cclxuICAgIC8vIFJlYWRGaWxlQXN5bmMoXCIuLi9HYW1lQm9hcmQxLnR4dFwiKS50aGVuKChyZXN1bHQ6QnVmZmVyKSA9PiB7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coXCJEb3dubG9hZGVkIEdhbWVCb2FyZDEudHh0XCIpO1xyXG4gICAgLy8gICAgIHZhciBnYW1lQm9hcmRTdHI6c3RyaW5nID0gcmVzdWx0LnRvU3RyaW5nKCk7XHJcbiAgICAvLyAgICAgUHJvY2Vzc0dhbWVib2FyZFRleHQoZ2FtZUJvYXJkU3RyKTtcclxuXHJcbiAgICAvLyB9KS5jYXRjaCgoZXJyOk5vZGVKUy5FcnJub0V4Y2VwdGlvbikgPT4ge1xyXG5cclxuICAgIC8vICAgICAvLyBOZWVkIHRvIGZhaWwgZXZlcnl0aGluZ1xyXG4gICAgLy8gfSk7XHJcblxyXG5cclxuLy8gfVxyXG5cclxuXHJcblxyXG5jbGFzcyBTcHJpdGVNYXBcclxue1xyXG4gICAgaW1hZ2U6SFRNTEltYWdlRWxlbWVudDtcclxuICAgIHRpbGVQeFNpemU6bnVtYmVyO1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuaW1hZ2UgPSBuZXcgSFRNTEltYWdlRWxlbWVudCgpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gTWF6ZVBhcnRzO1xyXG4gICAgICAgIHRoaXMudGlsZVB4U2l6ZSA9IDI0O1xyXG5cdH1cclxuXHJcbiAgICBkcmF3R2FtZVRpbGUoY29kZTpzdHJpbmcsIGNvbnRleHQ6Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjZW5YOm51bWJlciwgY2VuWTpudW1iZXIsIHRpbGVYOm51bWJlciwgdGlsZVk6bnVtYmVyKTp2b2lkXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHRpbGVXOm51bWJlciA9IHRoaXMudGlsZVB4U2l6ZTtcclxuICAgICAgICB2YXIgdGlsZUg6bnVtYmVyID0gdGhpcy50aWxlUHhTaXplO1xyXG5cclxuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltYWdlLCBcclxuICAgICAgICAgICAgdGlsZVggKiB0aGlzLnRpbGVQeFNpemUsIHRpbGVZICogdGhpcy50aWxlUHhTaXplLCB0aWxlVywgdGlsZUgsXHJcbiAgICAgICAgICAgICBjZW5YIC0gdGlsZVcgLyAyLCBjZW5ZIC0gdGlsZUggLyAyLCB0aWxlVywgdGlsZUgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIERyYXdHYW1lQm9hcmQoY29udGV4dDpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIDogYm9vbGVhblxyXG57XHJcbiAgICBpZiAoIW1fZ2FtZUJvYXJkTG9hZGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gSW5pdGlhbGl6ZSgpIDogYm9vbGVhblxyXG57XHJcbiAgICBpZiAoUHJvY2Vzc0dhbWVib2FyZFRleHQoR2FtZUJvYXJkVGV4dCkpXHJcbiAgICB7XHJcbiAgICAgICAgbV9nYW1lQm9hcmRMb2FkZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgeyBJbml0aWFsaXplLCBEcmF3R2FtZUJvYXJkIH07IiwiZXhwb3J0IGRlZmF1bHQgXCLilI/ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilJPilI/ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilJNcXHJcXG7ilIMuLi4uLi4uLi4uLi7ilIPilIMuLi4uLi4uLi4uLi7ilINcXHJcXG7ilIMu4pSP4pSB4pSB4pSTLuKUj+KUgeKUgeKUgeKUky7ilIPilIMu4pSP4pSB4pSB4pSB4pSTLuKUj+KUgeKUgeKUky7ilINcXHJcXG7ilINP4pSDICDilIMu4pSDICAg4pSDLuKUg+KUgy7ilIMgICDilIMu4pSDICDilINP4pSDXFxyXFxu4pSDLuKUl+KUgeKUgeKUmy7ilJfilIHilIHilIHilJsu4pSX4pSbLuKUl+KUgeKUgeKUgeKUmy7ilJfilIHilIHilJsu4pSDXFxyXFxu4pSDLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi7ilINcXHJcXG7ilIMu4pSP4pSB4pSB4pSTLuKUj+KUky7ilI/ilIHilIHilIHilIHilIHilIHilJMu4pSP4pSTLuKUj+KUgeKUgeKUky7ilINcXHJcXG7ilIMu4pSX4pSB4pSB4pSbLuKUg+KUgy7ilJfilIHilIHilJPilI/ilIHilIHilJsu4pSD4pSDLuKUl+KUgeKUgeKUmy7ilINcXHJcXG7ilIMuLi4uLi7ilIPilIMuLi4u4pSD4pSDLi4uLuKUg+KUgy4uLi4uLuKUg1xcclxcbuKUl+KUgeKUgeKUgeKUgeKUky7ilIPilJfilIHilIHilJMg4pSD4pSDIOKUj+KUgeKUgeKUm+KUgy7ilI/ilIHilIHilIHilIHilJtcXHJcXG4gICAgIOKUgy7ilIPilI/ilIHilIHilJsg4pSX4pSbIOKUl+KUgeKUgeKUk+KUgy7ilIMgICAgIFxcclxcbiAgICAg4pSDLuKUg+KUgyAgICAgICAgICDilIPilIMu4pSDICAgICBcXHJcXG4gICAgIOKUgy7ilIPilIMg4pSP4pSB4pSB4pSB4pSB4pSB4pSB4pSTIOKUg+KUgy7ilIMgICAgIFxcclxcbuKUgeKUgeKUgeKUgeKUgeKUmy7ilJfilJsg4pSDICAgICAg4pSDIOKUl+KUmy7ilJfilIHilIHilIHilIHilIFcXHJcXG4gICAgICAuICAg4pSDICAgICAg4pSDICAgLiAgICAgIFxcclxcbuKUgeKUgeKUgeKUgeKUgeKUky7ilI/ilJMg4pSDICAgICAg4pSDIOKUj+KUky7ilI/ilIHilIHilIHilIHilIFcXHJcXG4gICAgIOKUgy7ilIPilIMg4pSX4pSB4pSB4pSB4pSB4pSB4pSB4pSbIOKUg+KUgy7ilIMgICAgIFxcclxcbiAgICAg4pSDLuKUg+KUgyAgICAgICAgICDilIPilIMu4pSDICAgICBcXHJcXG4gICAgIOKUgy7ilIPilIMg4pSP4pSB4pSB4pSB4pSB4pSB4pSB4pSTIOKUg+KUgy7ilIMgICAgIFxcclxcbuKUj+KUgeKUgeKUgeKUgeKUmy7ilJfilJsg4pSX4pSB4pSB4pST4pSP4pSB4pSB4pSbIOKUl+KUmy7ilJfilIHilIHilIHilIHilJNcXHJcXG7ilIMuLi4uLi4uLi4uLi7ilIPilIMuLi4uLi4uLi4uLi7ilINcXHJcXG7ilIMu4pSP4pSB4pSB4pSTLuKUj+KUgeKUgeKUgeKUky7ilIPilIMu4pSP4pSB4pSB4pSB4pSTLuKUj+KUgeKUgeKUky7ilINcXHJcXG7ilIMu4pSX4pSB4pST4pSDLuKUl+KUgeKUgeKUgeKUmy7ilJfilJsu4pSX4pSB4pSB4pSB4pSbLuKUg+KUj+KUgeKUmy7ilINcXHJcXG7ilINPLi7ilIPilIMuLi4uLi4uICAuLi4uLi4u4pSD4pSDLi5P4pSDXFxyXFxu4pSX4pSB4pSTLuKUg+KUgy7ilI/ilJMu4pSP4pSB4pSB4pSB4pSB4pSB4pSB4pSTLuKUj+KUky7ilIPilIMu4pSP4pSB4pSbXFxyXFxu4pSP4pSB4pSbLuKUl+KUmy7ilIPilIMu4pSX4pSB4pSB4pST4pSP4pSB4pSB4pSbLuKUg+KUgy7ilJfilJsu4pSX4pSB4pSTXFxyXFxu4pSDLi4uLi4u4pSD4pSDLi4uLuKUg+KUgy4uLi7ilIPilIMuLi4uLi7ilINcXHJcXG7ilIMu4pSP4pSB4pSB4pSB4pSB4pSb4pSX4pSB4pSB4pSTLuKUg+KUgy7ilI/ilIHilIHilJvilJfilIHilIHilIHilIHilJMu4pSDXFxyXFxu4pSDLuKUl+KUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUmy7ilJfilJsu4pSX4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSbLuKUg1xcclxcbuKUgy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u4pSDXFxyXFxu4pSX4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSbXCIiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJmYjBmM2NkNDBmMWNhYmZkMTM2MjA0ZmI5ODM1Y2Y0Mi5wbmdcIjsiLCJ2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vcGFjbWFuX3N0eWxlLmNzc1wiKTtcblxuaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG59XG5cbnZhciBvcHRpb25zID0ge31cblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYgKGNvbnRlbnQubG9jYWxzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG59XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKShmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImh0bWwsIGJvZHkge1xcclxcbiAgbWFyZ2luOiAwO1xcclxcbn1cXHJcXG5cXHJcXG5odG1sIHtcXHJcXG4gIGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmO1xcclxcbiAgaGVpZ2h0OiAxMDAlO1xcclxcbn1cXHJcXG5cXHJcXG5ib2R5IHtcXHJcXG4gIGJhY2tncm91bmQ6ICM4NEFBQjI7XFxyXFxufVxcclxcblxcclxcblxcclxcblxcclxcbmE6bGluayB7XFxyXFxuXFxyXFxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxyXFxuICBjb2xvcjogd2hpdGU7XFxyXFxufVxcclxcblxcclxcbi5kaXZoZWFkZXJiYXIge1xcclxcbiAgZGlzcGxheTogZ3JpZDtcXHJcXG4gIGJhY2tncm91bmQ6ICMzNjRCNEM7XFxyXFxuICB3aWR0aDogMTAwJTtcXHJcXG4gIHBhZGRpbmc6IDIwcHggNDBweDtcXHJcXG59XFxyXFxuXFxyXFxuLmRpdmdhbWVjb250YWluZXIge1xcclxcbiAgaGVpZ2h0OmluaGVyaXQ7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgd2lkdGg6IDc2OHB4O1xcclxcbiAgLyogT3JkZXJzIGl0ZW1zIHRvcC1ib3R0b20gKi9cXHJcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxyXFxuICBiYWNrZ3JvdW5kOiAjNjc4Nzg3O1xcclxcblxcclxcbiAgLyogQWxsb3dzIHRoZSBkaXYgdG8gc2l6ZSBpdHNlbGYgYWNjb3JkaW5nIHRvIHRoZSBjaGlsZHJlbiBhbmQgY2VudGVyIGl0c2VsZi4gKi9cXHJcXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xcclxcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xcclxcbn1cXHJcXG5cXHJcXG4udGl0bGUge1xcclxcbiAgLyogRm9yY2VzIHRpdGxlIGNhcmQgdG8gY2VudGVyIGl0c2VsZiAqL1xcclxcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XFxyXFxuICBtYXJnaW4tcmlnaHQ6IGF1dG87XFxyXFxuICBtYXJnaW4tdG9wOiA0MHB4O1xcclxcbiAgaGVpZ2h0OiA0MHB4O1xcclxcbn1cXHJcXG5cXHJcXG5jYW52YXMge1xcclxcbiAgLyogQ2FudmFzIHdpZHRoL2hlaWdodCBzZXQgaW4gY29kZSAqL1xcclxcbiAgbWFyZ2luLXRvcDogMzBweDtcXHJcXG4gIG1hcmdpbi1sZWZ0OiAyMHB4O1xcclxcbiAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xcclxcbn1cIiwgXCJcIl0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVzZVNvdXJjZU1hcCkge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCJ7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IG1vZHVsZXNbX2ldOyAvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG4gICAgICAvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuICAgICAgLy8gd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxuICAgICAgLy8gSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXG4gICAgICBpZiAoaXRlbVswXSA9PSBudWxsIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGlmIChtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIihcIi5jb25jYXQoaXRlbVsyXSwgXCIpIGFuZCAoXCIpLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIilcIik7XG4gICAgICAgIH1cblxuICAgICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCkuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucykge1xuICB2YXIgc3R5bGVzID0gW107XG4gIHZhciBuZXdTdHlsZXMgPSB7fTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNzcyA9IGl0ZW1bMV07XG4gICAgdmFyIG1lZGlhID0gaXRlbVsyXTtcbiAgICB2YXIgc291cmNlTWFwID0gaXRlbVszXTtcbiAgICB2YXIgcGFydCA9IHtcbiAgICAgIGNzczogY3NzLFxuICAgICAgbWVkaWE6IG1lZGlhLFxuICAgICAgc291cmNlTWFwOiBzb3VyY2VNYXBcbiAgICB9O1xuXG4gICAgaWYgKCFuZXdTdHlsZXNbaWRdKSB7XG4gICAgICBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge1xuICAgICAgICBpZDogaWQsXG4gICAgICAgIHBhcnRzOiBbcGFydF1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBzdHlsZXNbaV07XG4gICAgdmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG4gICAgdmFyIGogPSAwO1xuXG4gICAgaWYgKGRvbVN0eWxlKSB7XG4gICAgICBkb21TdHlsZS5yZWZzKys7XG5cbiAgICAgIGZvciAoOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHBhcnRzID0gW107XG5cbiAgICAgIGZvciAoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcbiAgICAgIH1cblxuICAgICAgc3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7XG4gICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICByZWZzOiAxLFxuICAgICAgICBwYXJ0czogcGFydHNcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgb3B0aW9ucy5hdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMob3B0aW9ucy5hdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBvcHRpb25zLmF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgb3B0aW9ucy5hdHRyaWJ1dGVzID0gdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlcyA9PT0gJ29iamVjdCcgPyBvcHRpb25zLmF0dHJpYnV0ZXMgOiB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICB2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuICBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICB2YXIgbWF5UmVtb3ZlID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBzdHlsZXNbaV07XG4gICAgICB2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuICAgICAgaWYgKGRvbVN0eWxlKSB7XG4gICAgICAgIGRvbVN0eWxlLnJlZnMtLTtcbiAgICAgICAgbWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChuZXdMaXN0KSB7XG4gICAgICB2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgICAgYWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbWF5UmVtb3ZlLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9kb21TdHlsZSA9IG1heVJlbW92ZVtfaV07XG5cbiAgICAgIGlmIChfZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IF9kb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIF9kb21TdHlsZS5wYXJ0c1tqXSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIHN0eWxlc0luRG9tW19kb21TdHlsZS5pZF07XG4gICAgICB9XG4gICAgfVxuICB9O1xufTsiXSwic291cmNlUm9vdCI6IiJ9